# [7_Reverse Integer]( https://leetcode.com/problems/reverse-integer/ )

[toc]



## [负数取模操作]( https://zhuanlan.zhihu.com/p/39389916 )

所有的取模操作都满足：

> ```a = nq + r  |r| &lt; |a|
> a = nq + r  |r| < |a|
> 假设 q 是 a、b 相除得到的商(quotient)，r 是相应的余数(remainder)
> ```

**向上取整**。向 +∞ 方向取最接近精确值的整数，也就是取比实际结果稍大的最小整数，也叫 Ceiling 取整。这种取整方式下，

```text
17 / 10 = 2，5 / 2 = 3, -9 / 4 = -2
```

**向下取整**。向 -∞ 方向取最接近精确值的整数，也就是取比实际结果稍小的最大整数，也叫 Floor 取整。这种取整方式下，

```text
17 / 10 = 1，5 / 2 = 2, -9 / 4 = -3
```

**向零取整**。向 0 方向取最接近精确值的整数，换言之就是舍去小数部分，因此又称截断取整（Truncate）。这种取整方式下，

```text
17 / 10 = 1，5 / 2 = 2, -9 / 4 = -2
```

那么最上面的公式就有：

>```text
>a = nq + r 
>我们知道商 q = a/n，从而得出
>r = a - (a/n) * n
>而 (a/n) 这个结果取决于上面几种方式用哪个
>```

常用的计算机语言用的除法方式是下面这两种，**truncate 除法** 和 **floor 除法**。

**truncate 除法** 即是上面的**向零取整**，也叫趋零截尾，而 **floor 除法** 即是上面的**向下取整**，也叫趋负无穷截尾。

而 Java/C 等语言用的是 truncate 除法，Python 用的是 floor 除法。

在 Java/C 中，

```java
-7 % 3 = -1
7 % (-3) = 1 
// 下面是推倒过程
-7 % 3 = -7 - trunc(-7/3) * 3 = -7 - (-2) * 3 = -7 + 6 = -1
7 % (-3) = 7 - trunc(7 / (-3)) * (-3) = 7 - (-2) * (-3) = 7 - 6 = 1
```

在 Python 中，

```java
-7 % 3 = 2
7 % (-3) = -2
## 下面是推倒过程
-7 % 3 = -7 - floor(-7/3) * 3 = -7 - (-3) * 3 = -7 + 9 = 2
7 % (-3) =  7 - floor(7 / (-3)) * (-3) = 7 - (-3) * (-3) = 7 - 9 = -2
```

如果是其他语言，先去搞清楚是用的那种方式。



## Solution

**不需要把符号单独拿出来的原因** 

- x = abs(x)当x = $-2^{31}$时就超过了正数的表示范围
- 如果x为负数，第一个pop就是负数，那么下面每次*10也一直会是负数。

**下列程序说明**

- $-2^{31} = -2147483648; 2^{31}-1 = 2147483647$
- 不认为使用long long 是一个好的思路。万一机器不支持大于32位的数呢。

```
class Solution {
public:
    int reverse(int x) {
        if(x==0) return x;
        
        int res = 0;
        
        while(x){
            int pop = x % 10;
            x = x / 10;
            
            if(res > INT_MAX/10 || (res == INT_MAX /10 && pop > 7))
                return 0;
            if(res < INT_MIN/10 || (res == INT_MIN /10 && pop < -8))
                return 0;
            
            res = res * 10 + pop;
            
        }
        return res;
    }
};
```

